
////////////////////////////////////////
<!DOCTYPE html>
<html>
	<head>
		<script src="js/jquerymin.js"></script>
		<link rel="stylesheet" href="css/bootstrap.min.css"/>
		<link rel="stylesheet" href="css/bootstrap-theme.css"/>
		<script src="js/jquery.js"></script>
		<script src="js/bootstrap.min.js" type="text/javascript"></script>
		<script src="js/bspage.js"></script>

		<style>
  #submit{
  position: fixed;
	bottom: 50px;
  right:80px;
  width:100px;
  }
	#next{
  position: fixed;
	bottom: 150px;
  right:80px;
  width:100px;
  }
  #previous{
  position: fixed;
	bottom: 150px;
  right:200px;
  width:100px;
  }
#countdown {
    color: #1B232F;
    font-family: Verdana, Arial, sans-serif;
    font-size: 18px;
    font-weight: bold;
    text-decoration: none;
    color: #1B232F;
    position: absolute;
    text-align: center;
  top:450px;
  right:200px;
  width:100px;
}
#description{
	font-weight: bolder;
}
#question{
	font-weight: bolder;
}

.rect1 {
    width: 100px;
    height: 27px;
    border: 1px solid red;
    background-color:white;
}
#moveleft {
    margin-left: 80px;
}
#inst {
		background-color:white;
}
    </style>

    <script>
	var noquestion, questions, presentquestion, buttonnum, f=0, fillorchoice, currentid=0, answer, maxid=1, audio, video, audioorvideo=null;
	var result = [];
	var result1 = [];
	var file = [];
	var iod=0;
	var times_played = 0,max_plays = 2;
	$(document).ready(function(){
	getquestion();
	disablesubmit();
		 });
    function Countdown( elementName, minutes, seconds )
{
    var element, endTime, hours, mins, msLeft, time;

    function twoDigits( n )
    {
        return (n <= 9 ? "0" + n : n);
    }

    function updateTimer()
    {
        msLeft = endTime - (+new Date);
        if ( msLeft < 1000 ) {
            $("#countdown").html("Time's up!");
						disable();
        } else {
            time = new Date( msLeft );
            hours = time.getUTCHours();
            mins = time.getUTCMinutes();
            $("#countdown").html((hours ? hours + ':' + twoDigits( mins ) : mins) + ':' + twoDigits( time.getUTCSeconds() ));
						var ctime = (hours ? hours + ':' + twoDigits( mins ) : mins) + ':' + twoDigits( time.getUTCSeconds() );
						setCookie("ctime", ctime, 0);
            setTimeout( updateTimer, time.getUTCMilliseconds() + 500 );
        }
    }

    endTime = (+new Date) + 1000 * (60*minutes + seconds) + 500;
    updateTimer();
}
        function checksessionid(){
        	var sessi = getCookie("id");
                    if(sessi.length>69){
                        disable();
                    	return false;
                    }
                    else {
                    	return true;
                    }
        }

		function setCookie(cname, cvalue, exdays) {
    	document.cookie = cname + "=" + cvalue + ";";
		}

		function getCookie(cname) {
    var name = cname + "=";
    var ca = document.cookie.split(';');
    for(var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
        }
    }
		return "";
}
						function getquestion(){
							disableprevious();
							disablenext();
							disablesound();
							disablevideo();
							var session = getCookie("id");
							if(session.length<=69){
								$.get("/questions", {sessionId: session} ,function(data){

									window.question = data;
		  						    window.noquestion = window.question.Question[window.question.Question.length-1].SubQuestion[window.question.Question[window.question.Question.length-1].SubQuestion.length-1].QuestionId;

										var a1 = new Date();
										var a = new Date(window.question.Expiry);
										var a2 = new Date();
										a2 = Math.abs(a1.getTime()-a.getTime());
										Countdown( "countdown", a2/(1000*60), 0);
										nextfetchquestion(1);
										disableprevious();
										disablenext();
								});
							}
							else{
								alert("Your Session is Done");
								window.location="/register";
							}
						}

			function verify() {
    var x = document.getElementById("fill11");
    if(x.value.length>0){
			enable();
		}
}

				function prefetchquestion(){
							window.answer = window.result[window.currentid];
							if(window.fillorchoice=="fill"){
								if(window.answer==""){
									disablenext();
								}
								else {
								enablenext();
								$('#fill11').val(window.answer);
								}
							}else{
                               if(window.answer==undefined){
								disablenext();
								    }
                                    else {
                                    enablenext();
								    $('input:radio[name=choice]')[window.answer].checked = true;/////////////////////
								    }
							}
						}

        function nextfetchquestion(){
					// warning();
					// $("div").hide();
					disablenext();
        	var text, obj;
					if(arguments[0]==1){
						window.currentid+=1;
						if(window.maxid<window.currentid){
								window.maxid=window.currentid;
						}
					}
					else{
						window.currentid-=1;
					}
	        window.iod = window.iod + arguments[0];
	        if(window.iod==1){
	            disableprevious();
	        }
	        else {
	            enableprevious();
	        }
					if(window.iod<=window.noquestion){
        	if(checksessionid()){
				for(var i=0;i<window.question.Question.length;i++){
					for(var j=0;j<window.question.Question[i].SubQuestion.length;j++){
						if(window.question.Question[i].SubQuestion[j].QuestionId==window.iod){
							if(window.question.Question[i].File==""){
								$("#audiobutton").hide();
								$("#fileaudio").remove();
								$("#filevideo").remove();
								$("#description").text(window.question.Question[i].Description);
								$("#question").text(window.question.Question[i].SubQuestion[j].QuestionId+':'+window.question.Question[i].SubQuestion[j].Question);
									if(window.question.Question[i].SubQuestion[j].Choice==null){
										$("#choice3").hide();
										$("#choice2").hide();
										$("#choice1").hide();
										$("#choice0").hide();
										$("#fillintheblank").show();
										$("#fillintheblank").html('<input type="text" name="fill1" id="fill11" onkeyup="verify()"></input>');
										window.fillorchoice="fill";
										if(arguments[0]==-1){
											enablenext();
											prefetchquestion();
										}
										if((arguments[0]==1)&&(window.result[window.currentid]!=undefined)){
											enablenext();
											prefetchquestion();
										}
										break;
									}
									else{
										$("#fillintheblank").hide();
									    window.fillorchoice="choice";
											$("#choice3").show();
											$("#choice2").show();
											$("#choice1").show();
											$("#choice0").show();
											var cl = window.question.Question[i].SubQuestion[j].Choice.length;
											for(var k=0;k<cl;k++){
													// $("#choice"+k).html('<input type="radio" value="'+k+'" name="choice" id="'+k+'"choice" onclick="enable()"><label id="choicelabel'+k+'">' + window.question.Question[i].SubQuestion[j].Choice[k] +'</label></input>');
													$("#choice"+k).html('<label id="'+k+'"choice"><input type="radio" value="'+k+'" name="choice" id="'+k+'"choice" onclick="enable()">'+ window.question.Question[i].SubQuestion[j].Choice[k] +'</input></label>');
													// $("#label").html('<label for="'+window.question.Question[i].SubQuestion[j].Choice[k]+'">'+window.question.Question[i].SubQuestion[j].Choice[k]+'</label>');
											}
											if(cl==3){
												$("#choice3").hide();
											}
											else{
												$("#choice3").show();
											}
											if(arguments[0]==-1){
											prefetchquestion();
											enablenext();
											}
											if((arguments[0]==1)&&(window.result[window.currentid]!=undefined)){
											prefetchquestion();
											}
										// $("#choice0").html('<input type="radio" name="choice" id="0choice" onclick="enable()">' + window.question.Question[i].SubQuestion[j].Choice[0] +'</input>');
										// $("#choice1").html('<input type="radio" name="choice" id="1choice" onclick="enable()">' + window.question.Question[i].SubQuestion[j].Choice[1] +'</input>');
										// $("#choice2").html('<input type="radio" name="choice" id="2choice" onclick="enable()">' + window.question.Question[i].SubQuestion[j].Choice[2] +'</input>');
										// $("#choice3").html('<input type="radio" name="choice" id="3choice" onclick="enable()">' + window.question.Question[i].SubQuestion[j].Choice[3] +'</input>');
										break;
									}

							}
							else{
								// $("#audiofile").remove();
								// $("#videfile").remove();
								// $("#audiobutton").show();
								var a1 = window.question.Question[i].File;
								var n = a1.length;
								if(a1.substring(n-3, n)=="mp3"){
									// window.max_plays+=2;
									window.audioorvideo = "audio";
									$("#videobutton").hide();
									$("#audiobutton").show();
									$("#audiofile").show();
									$("audiotag0").html('<div id="audiotag0"></div>');
									$("#audiotag0").html('<audio id="fileaudio" width="640" height="264" >' + '<source src="'+a1+'" type="audio/mp3"></source>'+'</audio>');
									////////////////
									   ///////////////audio limit
												var times_played = 0,max_plays = 2;
									window.audio = document.getElementById("fileaudio");
									$(document).ready(function(){
									$("#audiobutton").click(function(){
										if (times_played >= max_plays) {
												times_played++;
												window.file[a1]==1;
										}
										else{
											if(window.file[a1]!=1){
											times_played++;
											window.audio.play();
										}
									}
									});
									});
								}
								else if(a1.substring(n-3, n)=="mp4"){
									window.audioorvideo = "video";
									$("#audiobutton").hide();
									$("#videobutton").show();
									$("#videofile").show();
									$("videotag0").html('<div id="videotag0"></div>');
									$("#videotag0").html('<video id="filevideo" width="640" height="264">' + '<source src="'+a1+'" type="video/mp4"></source>'+'</video>');
									///////////
									var times_played = 0,max_plays = 2;   ///////////////video limit
									window.video = document.getElementById("filevideo");
									$(document).ready(function(){
									$("#videobutton").click(function(){
										if (times_played >= max_plays) {
												times_played++;
												window.file[a1]=1;
										}
										else if(window.file[a1]!=1){
											times_played++;
											window.video.play();
										}
									});
									});

								}
            					$("#description").text(window.question.Question[i].Description);
            					$("#question").text(window.question.Question[i].SubQuestion[j].QuestionId+':'+window.question.Question[i].SubQuestion[j].Question);
            					if(window.question.Question[i].SubQuestion[j].Choice==null){
												$("#choice3").hide();
												$("#choice2").hide();
												$("#choice1").hide();
												$("#choice0").hide();
												$("#fillintheblank").show();
										$("#fillintheblank").html('<input type="text" name="fill1" id="fill11" onkeyup="verify()"></input>');
										window.fillorchoice="fill";
										if(arguments[0]==-1){
											enablenext();
											prefetchquestion();

										}
										if((arguments[0]==1)&&(window.result[window.currentid]!=undefined)){
											enablenext();
											prefetchquestion();

										}
										break;
									}
									else{
										$("#fillintheblank").hide();
									window.fillorchoice="choice";
									// disablenext();
									$("#choice3").show();
									$("#choice2").show();
									$("#choice1").show();
									$("#choice0").show();
									var cl = window.question.Question[i].SubQuestion[j].Choice.length;
									for(var k=0;k<cl;k++){
											// $("#choice"+k).html('<input type="radio" value="'+k+'" name="choice" id="'+k+'"choice" onclick="enable()"><label id="choicelabel'+k+'">' + window.question.Question[i].SubQuestion[j].Choice[k] +'</label></input>');
											$("#choice"+k).html('<label id="'+k+'"choice"><input type="radio" value="'+k+'" name="choice" id="'+k+'"choice" onclick="enable()">'+ window.question.Question[i].SubQuestion[j].Choice[k] +'</input></label>');
											// $("#"+k+"choice").html('<label for="'+window.question.Question[i].SubQuestion[j].Choice[k]+'">'+window.question.Question[i].SubQuestion[j].Choice[k]+'</label>');
									}
									if(cl==3){
										$("#choice3").hide();
									}
									else{
										$("#choice3").show();
									}
									// disablenext();
									if(arguments[0]==-1){
									prefetchquestion();
									enablenext();
									}
									if((arguments[0]==1)&&(window.result[window.currentid]!=undefined)){
									prefetchquestion();
									enablenext();
									}
									break;
									// $("#choice0").html('<input type="radio" name="choice" id="0choice" onclick="enable()">' + window.question.Question[i].SubQuestion[j].Choice[0]+'</input>');
									// $("#choice1").html('<input type="radio" name="choice" id="1choice" onclick="enable()">' + window.question.Question[i].SubQuestion[j].Choice[1] +'</input>');
									// $("#choice2").html('<input type="radio" name="choice" id="2choice" onclick="enable()">' + window.question.Question[i].SubQuestion[j].Choice[2] +'</input>');
									// $("#choice3").html('<input type="radio" name="choice" id="3choice" onclick="enable()">' + window.question.Question[i].SubQuestion[j].Choice[3] +'</input>');
									}
							}
            				///
            				break;
						}
					}
					// break;
					// enablenext();
				}
			}
			else{
				// alert("Times Up");
				save(1);
			}
        }
				else{
					window.iod = window.iod -1;
					enablesubmit();
					save(2);
				}
			}

				// $('input[type="radio"]').on('click change', function(e) {
    		// 	enable();
				// });

				function enable(){
					enablenext();
					if(window.iod!=1){
							enableprevious();
					}
				}
				function disable(){
					disablenext();
					disableprevious();
					disablesubmit();
					save(-1);
				}

        function disablenext(){
						$('#next').hide();
        }
				function disablesound(){
						$('#audiobutton').hide();
        }
				function disablevideo(){
						$('#videobutton').hide();
        }

        function enablenext(){
            // $('#next').removeAttr('disabled');
						$('#next').show();
        }

        function disableprevious(){
            // $('#previous').attr('disabled','disabled');
						$('#previous').hide();
        }

        function enableprevious(){
            $('#previous').show();
        }

        function disablesubmit(){
            // $('#submit').attr('disabled','disabled');
						$('#submit').hide();
        }

        function enablesubmit(){
            // $('#submit').removeAttr('disabled');
						$('#submit').show();
        }

				function fillall(){
					var i;
					for(i=window.currentid; i<window.noquestion; i++){
						var json = JSON.stringify({"QuestionId":i,"Answer":"Not Answered"});
						$.get("/update",{ sessionId: getCookie("id"), updateJson:json } ,function(data){
								window.result[w] = a;
						});
					}
				}

				function save(){
					// audio.stop();
					if(window.currentid<window.noquestion){
						if(audioorvideo==null){
						$("#audiobutton").hide();
						$("#audiofile").remove();
						$( "#fileaudio" ).remove();
						$("#videobutton").hide();
						$("#videofile").remove();
						$( "#filevideo" ).remove();
					}
					else if(audioorvideo=="audio"){
						$("#audiobutton").hide();
						$("#audiofile").remove();
						$( "#fileaudio" ).remove();
					}
					else if(audioorvideo=="video"){
						$("#videobutton").hide();
						$("#videofile").remove();
						$( "#filevideo" ).remove();
					}
				}
					var w = window.currentid;
					var a,a1,a11;

					if(window.fillorchoice == "fill"){
							a=$("#fill11").val();
							a1=$("#fill11").val();
					}
					else {
              // var tmp = $('input:radio[name=choice]:checked').val();///////////////
              // tmp='choicelabel'+tmp;///////////////
							// a1= $(tmp).val();////////////////////////
							// a1=$( "input:checked" ).val();
							// a1=$( "input:checked" ).val();
							a = $('input:radio[name="choice"]:checked').val();
							for(var i=0;i<window.question.Question.length;i++){
								for(var j=0;j<window.question.Question[i].SubQuestion.length;j++){
									if(window.question.Question[i].SubQuestion[j].QuestionId==window.currentid){
										a1 = window.question.Question[i].SubQuestion[j].Choice[a];
									}
								}
							}

          }
					var json = JSON.stringify({"QuestionId":w,"Answer":a1});
					$.get("/update",{ sessionId: getCookie("id"), updateJson:json } ,function(data){
							window.result[w] = a;
					});
					if(arguments[0]==0){
                        nextfetchquestion(1);
				    }
				    else if(arguments[0]==-1){
								//fillall();
								document.cookie = "id=done"+getCookie("id")+";";
				        alert("Time's up your answer are saved");

				        window.location = "/results";
				    }
				    else if(arguments[0]==1){
				        //submit button
								// enablesubmit();
				        document.cookie = "id=done"+getCookie("id")+";";
								// fillall();
				        window.location = "/results";
				    }
						else if(arguments[0]==2){
				        //submit button
								alert("verify and submit");
								// enablesubmit();
				    }
						if(arguments[0]==3){
				        //submit button
				        nextfetchquestion(-1);
								// enablesubmit();
				    }
				}

    </script>

	</head>
    <body onunload="checksessionid()" style="background-color:#E6E6FA;">
		<div id="test"></div>
        <nav class="navbar navbar-inverse">
            <div class="container-fluid">
                <div class="navbar-header">
                    <a class="navbar-brand">Aptitude Test</a>
                </div>
            </div>
        </nav>
        <div id="moveleft" class="container-fluid">
            <div class="row" >
                <div class="col-md-8 " id="quesPlane" style="border-right: 1px solid black;">
										<button id="audiobutton">Play Sound</button>
										<button id="videobutton">Play video</button>
										<div id="audiotag0">
										<div id="audiofile"></div> -->
									<!--</div>
									<div id="videotag0">-->
									<!-- <div id="videofile"></div> -->
							<!--	</div>
										<br>
										<div id="videofile"></div>
										<br>
                    <div id="description"></div>
										<br>
										<div style="border-bottom: 1px solid black;"></div>
										<div style="font-size:20px"><strong>Question</strong></div>
                    <div id="question"></div>
										<br>
                    <div id="fillintheblank"></div>
                    <div id="choice0">
                        <input type="radio" name="gender" value="male" checked> sada<br>-->
                    <!--</div><br>
                    <div id="choice1">
                        <!--<input type="radio" name="gender" value="male" checked> sada<br>-->
                        <!-- <label type="radio"><input> -->
                    </div><br>
                    <div id="choice2">
                        <!--<input type="radio" name="gender" value="male" checked> sada<br>-->
                    </div><br>
                    <div id="choice3">
                        <!--<input type="radio" name="gender" value="male" checked> sada<br>-->
                    </div><br>
                </div>
                <div class="col-md-4" id="sidePlane" >
                    <!--<div style="background=black;width=10px;height=100%;margin-left=800px;"></div>-->
										<div id="inst"></div>
                	<div id="createbutton" ></div>
									<div>
										<button class="btn btn-primary" id="next" style="color:grre;margin-left:30px;" onclick="save(0)">Next</button>
									<button class="btn btn-primary" id="previous" onclick="save(3)">Previous</button>
									</div>
                	<div id="countdown" class="rect1">Time left</div>
					<button class="btn btn-primary" id="submit" onclick="save(1)">Submit</button>
                </div>
            </div>
        </div>
    </body>
    <style>
		#test{
			position: absolute;
			width: 100%;
			height: 100%;
		}
        #quesPlane{
			height: 100%;
        }
        #sidePlane{
			height:100%;

        }
    </style>
	<script>
		var th = $("#test").height();
		$("#test").hide();
		$("body").height(th);

	</script>
</html>
-->-->










////////////////////










<!--<!DOCTYPE html>
<html>
<head>
    <script src="js/jquerymin.js"></script>
    <link rel="stylesheet" href="css/bootstrap.min.css"/>
    <link rel="stylesheet" href="css/bootstrap-theme.css"/>
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap.min.js" type="text/javascript"></script>
    <script src="js/bspage.js"></script>

    <style>
        .button{
  display:inline-block;
  text-decoration:none;
  color:yellow;
  font-weight:bold;
  min-width:132px;
  min-height:37px;
  border:1px solid black;
  border-radius:12px;
  text-align:center;
  background-color:gray;
  box-shadow:8px 8px 8px gray;
  margin:10px;
  position:fixed;
  top:500px;
  left:500px;
  }

  .button1{
  display:inline-block;
  text-decoration:none;
  color:blue;
  font-weight:bold;
  min-width:132px;
  min-height:37px;
  border:1px solid black;
  border-radius:12px;
  text-align:center;
  background-color:gray;
  box-shadow:8px 8px 8px gray;
  margin:10px;
  position:fixed;
  top:500px;
  left:300px;
  }

  .button2{
  display:inline-block;
  text-decoration:none;
  color:blue;
  font-weight:bold;
  min-width:132px;
  min-height:37px;
  border:1px solid black;
  border-radius:12px;
  text-align:center;
  background-color:gray;
  box-shadow:8px 8px 8px gray;
  margin:10px;
  position:fixed;
  top:500px;
  left:700px;
  }

  .button3{
  display:inline-block;
  text-decoration:none;
  color:blue;
  font-weight:bold;
  min-width:132px;
  min-height:37px;
  border:1px solid black;
  border-radius:12px;
  text-align:center;
  background-color:gray;
  box-shadow:8px 8px 8px gray;
  margin:10px;
  position:fixed;
  top:500px;
  left:1100px;
  }

  #button3{
  display:inline-block;
  text-decoration:none;
  color:blue;
  font-weight:bold;
  min-width:132px;
  min-height:37px;
  border:1px solid black;
  border-radius:12px;
  text-align:center;
  background-color:gray;
  box-shadow:8px 8px 8px gray;
  }

.button:active{
  background-color:blue;
  position:fixed;
  top:508px;
  left:808px;
}

.button1:active{
  background-color:blue;
  position:fixed;
  top:508px;
  left:658px;
}

.button2:active{
  background-color:blue;
  position:fixed;
  top:508px;
  left:958px;
}

.button3:active{
  background-color:blue;
  position:fixed;
  top:508px;
  left:1108px;
}
#countdown {
    color: #1B232F;
    font-family: Verdana, Arial, sans-serif;
    font-size: 18px;
    font-weight: bold;
    text-decoration: none;
    position: fixed;
    top:500px;
    left:1000px;
}
    </style>

    <script>
//////////////////////////////////
	var noquestion, questions, presentquestion, buttonnum;
	var result = [];
	var iod=0;
	// countdown( "countdown", window.questions[0].Expiry, 0);
    function countdown( elementName, minutes, seconds )
{
    var element, endTime, hours, mins, msLeft, time;

    function twoDigits( n )
    {
        return (n <= 9 ? "0" + n : n);
    }

    function updateTimer()
    {
        msLeft = endTime - (+new Date);
        if ( msLeft < 1000 ) {
            $("countdown").text = "countdown's over!";
						/////
						disablenext();
						disableprevious();
						save(-1);
						/////
        } else {
            time = new Date( msLeft );
            hours = time.getUTCHours();
            mins = time.getUTCMinutes();
            $("countdown").text = (hours ? hours + ':' + twoDigits( mins ) : mins) + ':' + twoDigits( time.getUTCSeconds() );
            setTimeout( updateTimer, time.getUTCMilliseconds() + 500 );
        }
    }

    element = document.getElementById( elementName );
    endTime = (+new Date) + 1000 * (60*minutes + seconds) + 500;
    updateTimer();
}

// countdown( "countdown", 30, 1);
////////////////////////////////////
        function checksessionid(){
        	var sessi = getCookie("id");
                    if(sessi.length<69){
                    	return false;
                    // disableprevious();
                    }
                    else {
                    	getquestion();
                    	return true;
                    }
        }
        function getCookie(cname) {
		    var name = cname + "=";
		    var ca = document.cookie.split(';');
		        var c = ca[i];
		        var c1 = c.split('=');
		        if(c1.length<69)
		        	return "";
		        else
		        	return c1[1];
		}

        // $(document).ready(function(){
            // $("#next").click(function(){ //////////////////////////////////////////////////
            	function getquestion(){
	            	var sessi = getCookie("id");
	            	var session = JSON.stringify({"SessionId":sessi});
								if(session>68){
	                $.get("/questions", {studentJson: session} ,function(data){
	                	window.question = JSON.parse(data);
	                	window.noquestion = window.question[0].Question[employees[0].Question.length-1].SubQuestion[employees[0].Question[employees[0].Question.length-1].SubQuestion.length-1].QuestionId;
	                	Createbutton(window.noquestion);
										countdown( "countdown", window.questions[0].Expiry, 0);
	                    fetchquestion(0);
											disableprevious();
											disablenext();
	                });
	            }
							else{
								alert("Times Up On Load");
							}
						}
            // });
        // });



		function Createbutton(){
        	for(var i=1; i<=(window.noquestion);i++){
          		var dynamicbutton= $('<input/>').attr({ id: 'button'+i, type: 'button', name: 'btn'+i, value: i});
          		$("#createbutton").append(dynamicbutton);
          	}
          }

          for(i=0;i<window.noquestion;i++){
          $(document).on('click','#button'+i,function(){
          		//alert($("#button"+i).text());
          		//alert($(this).val());
          		window.buttonnum=$(this).val();
          		save(2);
          		//jumpfetchquestion(window.buttonnum);
          		//alert(window.a);
			});
			}

		function jumpfetchquestion(jumpnop){
        	var text, obj;
	        if(jumpnop==1){
	            disableprevious();
	        }
	        else {
	            enableprevious();
	        }
        	//$("div").remove();//////have to change
        	if(checksessionid){
				for(var i=0;i<window.noquestion;i++){
					for(var j=0;j<window.question[0].Question[i].SubQuestion.length;j++){
						if(window.question[0].Question[i].SubQuestion[j].QuestionId==jumpnop){
							//addquestion("window.question[0].Question["+i+"].SubQuestion["+j+"]");
							if(window.question[0].Question[i].File==null){
								$("#description").text(window.question[0].Question[i].Description);
								$("#questionid").text(window.question[0].Question[i].SubQuestion[j].QuestionId);
								$("#question").text(window.question[0].Question[i].SubQuestion[j].Question);
									if(window.question[0].Question[i].SubQuestion[j].Choice==null){
										$("#fillintheblank").text("fill the field");
									}
									else{
										$("#choice0").html('<input type="radio" id="0choice" onclick=enable()>' + window.question[0].Question[i].SubQuestion[j].Choice[0] +'</input>');
										$("#choice1").html('<input type="radio" id="1choice" onclick=enable()>' + window.question[0].Question[i].SubQuestion[j].Choice[1] +'</input>');
										$("#choice2").html('<input type="radio" id="2choice" onclick=enable()>' + window.question[0].Question[i].SubQuestion[j].Choice[2] +'</input>');
										$("#choice3").html('<input type="radio" id="3choice" onclick=enable()>' + window.question[0].Question[i].SubQuestion[j].Choice[3] +'</input>');
									}
							}
							else{
								var a1 = window.question[0].Question[i].File;
								var n = a1.length;
								if(a1.substring(n-3, n)=="mp3"){
									//audio
									$("#audiofile").html('<audio id="fileaudio" width="640" height="264" controls>' + '<source src="'+a1+'" type="audio/mp3"></source>'+'</audio>');;
								}
								else if(a1.substring(n-3, n)=="mp4"){
									//video
									$("#videofile").html('<video id="filevideo" width="640" height="264" controls>' + '<source src="'+a1+'" type="video/mp4"></source>'+'</video>');
								}
            					$("#description").text(window.question[0].Question[i].Description);
            					$("#questionid").text(window.question[0].Question[i].SubQuestion[j].QuestionId);
            					$("#question").text(window.question[0].Question[i].SubQuestion[j].Question);
            					if(window.question[0].Question[i].SubQuestion[j].Choice==null){
										$("#fillintheblank").text("fill the field");
									}
									else{
									$("#choice0").html('<input type="radio" id="0choice" onclick=enable()>' + window.question[0].Question[i].SubQuestion[j].Choice[0] +'</input>');
									$("#choice1").html('<input type="radio" id="1choice" onclick=enable()>' + window.question[0].Question[i].SubQuestion[j].Choice[1] +'</input>');
									$("#choice2").html('<input type="radio" id="2choice" onclick=enable()>' + window.question[0].Question[i].SubQuestion[j].Choice[2] +'</input>');
									$("#choice3").html('<input type="radio" id="3choice" onclick=enable()>' + window.question[0].Question[i].SubQuestion[j].Choice[3] +'</input>');
									}
							}
            				///
            				break;
						}
					}
					break;
				}
			}
			else{
				alert("Times Up");
			}
        }

        function nextfetchquestion(nextnop){
        	var text, obj;
	        window.iod = window.iod + nextnop;
	        if(window.iod==0){
	            disableprevious();
	        }
	        else {
	            enableprevious();
	        }
        	///$("div").remove();//////have to change
        	if(checksessionid){
				for(var i=0;i<window.noquestion;i++){
					for(var j=0;j<window.question[0].Question[i].SubQuestion.length;j++){
						if(window.question[0].Question[i].SubQuestion[j].QuestionId==jumpnop){
							//addquestion("window.question[0].Question["+i+"].SubQuestion["+j+"]");
							if(window.question[0].Question[i].File==null){
								$("#description").text(window.question[0].Question[i].Description);
								$("#questionid").text(window.question[0].Question[i].SubQuestion[j].QuestionId);
								$("#question").text(window.question[0].Question[i].SubQuestion[j].Question);
									if(window.question[0].Question[i].SubQuestion[j].Choice==null){
										$("#fillintheblank").text("fill the field");
									}
									else{
										$("#choice0").html('<input type="radio" id="0choice" onclick=enable()>' + window.question[0].Question[i].SubQuestion[j].Choice[0] +'</input>');
										$("#choice1").html('<input type="radio" id="1choice" onclick=enable()>' + window.question[0].Question[i].SubQuestion[j].Choice[1] +'</input>');
										$("#choice2").html('<input type="radio" id="2choice" onclick=enable()>' + window.question[0].Question[i].SubQuestion[j].Choice[2] +'</input>');
										$("#choice3").html('<input type="radio" id="3choice" onclick=enable()>' + window.question[0].Question[i].SubQuestion[j].Choice[3] +'</input>');
									}
							}
							else{
								var a1 = window.question[0].Question[i].File;
								var n = a1.length;
								if(a1.substring(n-3, n)=="mp3"){
									//audio
									$("#audiofile").html('<audio id="fileaudio" width="640" height="264" controls>' + '<source src="'+a1+'" type="audio/mp3"></source>'+'</audio>');;
								}
								else if(a1.substring(n-3, n)=="mp4"){
									//video
									$("#videofile").html('<video id="filevideo" width="640" height="264" controls>' + '<source src="'+a1+'" type="video/mp4"></source>'+'</video>');

								}
            					$("#description").text(window.question[0].Question[i].Description);
            					$("#questionid").text(window.question[0].Question[i].SubQuestion[j].QuestionId);
            					$("#question").text(window.question[0].Question[i].SubQuestion[j].Question);
            					if(window.question[0].Question[i].SubQuestion[j].Choice==null){
										$("#fillintheblank").text("fill the field");
									}
									else{
									$("#choice0").html('<input type="radio" id="0choice" onclick=enable() value="'+window.question[0].Question[i].SubQuestion[j].Choice[0]+'">' + window.question[0].Question[i].SubQuestion[j].Choice[0] +'</input>');
									$("#choice1").html('<input type="radio" id="1choice" onclick=enable()>' + window.question[0].Question[i].SubQuestion[j].Choice[1] +'</input>');
									$("#choice2").html('<input type="radio" id="2choice" onclick=enable()>' + window.question[0].Question[i].SubQuestion[j].Choice[2] +'</input>');
									$("#choice3").html('<input type="radio" id="3choice" onclick=enable()>' + window.question[0].Question[i].SubQuestion[j].Choice[3] +'</input>');
									}
							}
            				///
            				break;
						}
					}
					break;
					enablenext();
				}
			}
			else{
				alert("Times Up");
			}
        }

				function enable(){
					enablenext();
					enableprevious();
					enablesubmit();
				}

        function disablenext(){
            // $('#next').attr('disabled','disabled');
						$('#next').hide();
        }

        function enablenext(){
            // $('#next').removeAttr('disabled');
						$('#next').show();
        }

        function disableprevious(){
            // $('#previous').attr('disabled','disabled');
						$('#previous').hide();
        }

        function enableprevious(){
            $('#previous').show();
        }

        function disablesubmit(){
            // $('#submit').attr('disabled','disabled');
						$('#submit').hide();
        }

        function enablesubmit(){
            // $('#submit').removeAttr('disabled');
						$('#submit').show();
        }

        function datasend(){
            var json = JSON.stringify({"QuestionId":window.iod,"Answer":document.getElementById()});
                $.get("/questions", {updateJson:json} ,function(data){
                    //store data in local storage
                    <!--window.location = "/result";-->
                });
        }

				function save(cd){
					var w = $("#questionid").val();
					var a;
					if(document.getElementById('0choice').checked) {
                      a = 0;
                    }else if(document.getElementById('1choice').checked) {
                      a = 1;
                    }else if(document.getElementById('2choice').checked) {
                      a = 2;
                    }else if(document.getElementById('3choice').checked) {
                      a = 3;
                    }
					var json = JSON.stringify({"QuestionId":w,"Answer":document.getElementById(i1).value});
					$.get("/update", {updateJson:json}{ sessionId: getCookie("id"), updateJson:json } ,function(data){
							//store data in local storage
							window.result[w] = a;
					});
					if(cd==0){
					    ///next button
                        nextfetchquestion(1);
				    }
				    else if(cd==-1){
				        //time up
				        alert("oops time's up your answer are saved");
				        window.location = "/result";
				    }
				    else if(cd==-1){
				        //submit button
				        alert("Thank You");
				        window.location = "/result";
				    }
				    else if(cd==2){
				        //series button
				        jumpfetchquestion(window.buttonnum);
				    }
				}

    </script>

</head>
<body onload="getquestion()">
<div id="test"></div>
<div class="container-fluid">
    <div class="row" >
        <div class="col-md-8" id="quesPlane">
            <div id="audiofile"></div>
            <div id="videofile"></div>
            <div id="description"></div>
            <div id="questionid"></div>
            <div id="question"></div>
            <div id="fillintheblank"></div>
            <div id="choice0"></div>
            <div id="choice1"></div>
            <div id="choice2"></div>
            <div id="choice3"></div>
            <button class="button" id="next" style="color:grre;margin-left:30px;" onclick="save(0)">Next</button>
            <button class="button1" id="previous" onclick="nextfetchquestion(-1)">Previous</button>
        </div>
        <div class="col-md-4" id="sidePlane">
            <div style="background=black;width=10px;height=100%;margin-left=800px;"></div>
            <div id="createbutton"></div>
            <div id="countdown">countdown</div>
            <button class="button3" id="submit" onclick="save(1)">Submit</button>
        </div>
    </div>
</div>
</body>
<style>
		#test{
			position: absolute;
			width: 100%;
			height: 100%;
		}
        #quesPlane{
			height: 100%;
			border-right: 1px solid #ccc;
        }
        #sidePlane{
			height:100%;

        }
    </style>
<script>
		var th = $("#test").height();
		$("#test").hide();
		$("body").height(th);

	</script>

-->
<!--
perfect working code executed in w3school
<!DOCTYPE html>
<html>
<body>

<p id="demo">How to create a JavaScript object array.</p>


<script>
var employees = [
    {
    "Expiry": 30,
    "Question": [
        {
            "File": null,
            "Description": "Find the matches in the following questions",
            "SubQuestion": [
                {
                    "QuestionId": 1,
                    "Question": "Test question",
                    "Choice": [ "ans1", "ans2", "ans3", "ans4" ]
                },
                {
                    "QuestionId": 2,
                    "Question": "Test question2",
                    "Choice": [ "ans1", "ans2", "ans3", "ans4" ]
                }
            ]
        },
        {
            "File": "ascgerg.mp3",
            "Description": "Answer the following questions from the audio",
            "SubQuestion": [
                {
                    "QuestionId": 3,
                    "Question": "Test question3",
                    "Choice": null
                },
                {
                    "QuestionId": 4,
                    "Question": "Test question4",
                    "Choice": [ "ans1", "ans2", "ans3", "ans4" ]
                }
            ]
        }
    ]
}
];
function sample()
{
		for(var i=0;i<2;i++){
					for(var j=0;j<employees[0].Question[i].SubQuestion.length;j++){
						if(employees[0].Question[i].SubQuestion[j].QuestionId==5){
		alert(employees[0].Question[i].SubQuestion[j].Question);
        document.getElementById("demo").value=employees[0].Question[i].SubQuestion[j].Question;
						}
					}
				}
                }

function addquestion(aq){
			alert(aq.Question);
            $("#question").load(aq.QuestionId);
            if(aq.choice!=null)
            $("#question1").load(aq.choice);
        }
</script>
<p id="question"></p>
<p id="question"></p>
<button id="question1" onclick="sample()">asdsa</button>
</body>
</html>


if(checksessionid){
        		text = localStorage.getItem("JSONQuestion");
				obj = JSON.parse(text);
				for(var i=0;i<window.noquestion;i++){
					if(obj[0].Question[window.iod].SubQuestion[window.iod].Question!=null){
						addquestion(obj[window.iod].Question[window.iod].SubQuestion[window.iod].Question);
					}
					if(obj[window.iod].Question[window.iod].File!=null){
						var a1=obj[window.iod].Question[window.iod].File;
						var n=a1.length;
						if(a1.substring(n-3, n)=="mp3"){
							//audio
							addaudiofile(a1);
						}
						else if(a1.substring(n-3, n)=="mp4"){
							//video
							addvideofile(a1);
						}
					}

					if(obj[window.iod].Question[window.iod].SubQuestion[window.iod].Choice!=null){
					    addchoice(obj[window.iod].Question[window.iod].SubQuestion[window.iod].Choice[i]);
					}
					if(obj[window.iod].Question[window.iod].SubQuestion[window.iod].Choice==null){
	                    ///fill in the blank
					}
				}
        	}

--><!--</html>
